{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["/* Charts */\r\nvar chartColors = {\r\n\tchart1: '#c1c106',\r\n\tchart2: '#ff0000',\r\n\tchart3: '#0d8ecf'\r\n};\r\n\r\nAmCharts.translations.ro = {\r\n\t'monthNames': ['Ianuarie', 'Februarie', 'Martie', 'Aprilie', 'Mai', 'Iunie', 'Iulie', 'August', 'Septembrie', 'Octombrie', 'Noiembrie', 'Decembrie'],\r\n\t'shortMonthNames': ['Ian', 'Feb', 'Mar', 'Apr', 'Mai', 'Iun', 'Iul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\r\n\t'dayNames': ['Duminică', 'Luni', 'Marţi', 'Miercuri', 'Joi', 'Vineri', 'Sâmbătă'],\r\n\t'shortDayNames': ['Du', 'Lu', 'Ma', 'Mi', 'Jo', 'Vi', 'Sb'],\r\n\t'zoomOutText': 'Arată tot'\r\n};\r\nAmCharts.translations.dataLoader.ro = {\r\n\t'Error loading the file': 'Eroare la incarcarea fisierului',\r\n\t'Error parsing JSON file': 'Eroarea la parsarea fisierului JSON',\r\n\t'Unsupported data format': 'Formatul de date nu este suportat',\r\n\t'Loading data...': 'Se incarca...'\r\n};\r\nAmCharts.translations['export']['ro'] = {\r\n\t'fallback.save.text': 'CTRL + C pentru a copia datele in clipboard',\r\n\t'fallback.save.image': 'Click Dreapta -> Descarca imagine... pentru a salva imaginea.',\r\n\t'capturing.delayed.menu.label': '{{duration}}',\r\n\t'capturing.delayed.menu.title': 'Click pentru anulare',\r\n\t'menu.label.print': 'Printează',\r\n\t'menu.label.undo': 'Revers la modificare',\r\n\t'menu.label.redo': 'Revino la modificare',\r\n\t'menu.label.cancel': 'Anulează',\r\n\t'menu.label.save.image': 'Descarcă ...',\r\n\t'menu.label.save.data': 'Salvează ...',\r\n\t'menu.label.draw': 'Adnoteaza...',\r\n\t'menu.label.draw.change': 'Schimbă ...',\r\n\t'menu.label.draw.add': 'Adaugă ...',\r\n\t'menu.label.draw.shapes': 'Forme ...',\r\n\t'menu.label.draw.colors': 'Culoari ...',\r\n\t'menu.label.draw.widths': 'Marimi ...',\r\n\t'menu.label.draw.opacities': 'Opacitate ...',\r\n\t'menu.label.draw.text': 'Text',\r\n\t'menu.label.draw.modes': 'Mod ...',\r\n\t'menu.label.draw.modes.pencil': 'Creion',\r\n\t'menu.label.draw.modes.line': 'Linie',\r\n\t'menu.label.draw.modes.arrow': 'Sageată',\r\n\t'label.saved.from': 'Salvat de la: '\r\n};\r\n\r\nvar chartVars = {\r\n\ttype: 'serial',\r\n\ttheme: 'light',\r\n\tlanguage: 'ro',\r\n\tmarginTop: 10,\r\n\tmarginLeft: 15,\r\n\tmarginRight: 20,\r\n\tcolors: [chartColors.chart1],\r\n\tdataDateFormat: 'YYYY-MM-DD',\r\n\tvalueAxes: [ {\r\n\t\tid: 'v1',\r\n\t\taxisThickness: 2,\r\n\t} ],\r\n\tballoon: {\r\n\t\tborderThickness: 1,\r\n\t\tshadowAlpha: 0\r\n\t},\r\n\tgraphs: [ {\r\n\t\tid: 'g1',\r\n\t\tfillAlphas: 0.5,\r\n\t\tvalueField: 'value'\r\n\t} ],\r\n\tchartCursor: {\r\n\t\tvalueLineEnabled: true,\r\n\t\tvalueLineBalloonEnabled: true,\r\n\t\tcursorAlpha: 0,\r\n\t\tzoomable: false\r\n\t},\r\n\tcategoryField: 'date',\r\n\tcategoryAxis: {\r\n\t\taxisThickness: 2\r\n\t},\r\n\texport: {\r\n\t\tenabled: false\r\n\t},\r\n\tdataLoader: {\r\n\t\tformat: 'json',\r\n\t\turl: null,\r\n\t\tshowErrors: true,\r\n\t\tasync: true,\r\n\t\tcomplete: function() {\r\n\t\t\t// console.log('yep.. data e acolo ...');\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction toURLDate(date) {\r\n\tif(date instanceof Date) {\r\n\t\tdate = date.toISOString();\r\n\t}\r\n\treturn date.split('T')[0];\r\n}\r\n\r\nfunction dataUrl(currency, baseCurrency, startDate, endDate) {\r\n\tvar result = homeUrl + '/json/range/' + currency;\r\n\tif(baseCurrency) {\r\n\t\tresult += '/' + baseCurrency;\r\n\t}\r\n\tif(startDate && endDate) {\r\n\t\tresult += '/'+toURLDate(startDate)+'/'+toURLDate(endDate);\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction loadChart(chartId, currency, color, startDate, endDate, baseCurrency) {\r\n\tvar opts = $.extend(true, {}, chartVars);\r\n\r\n\tvar multipliers = {\r\n\t\t'HUF': 100,\r\n\t\t'JPY': 100,\r\n\t\t'KRW': 100\r\n\t};\r\n\r\n\tvar multiplier = multipliers[currency] || 1;\r\n\tif(!baseCurrency) {\r\n\t\tbaseCurrency = 'RON';\r\n\t}\r\n\topts.colors = [color];\r\n\topts.dataLoader.url = dataUrl(currency, baseCurrency, startDate, endDate);\r\n\r\n\topts.addClassNames = true;\r\n\topts.graphs[0].balloonText = '<div style=\"margin:5px; font-size:12px;\">' + multiplier + ' ' + currency + ' = <b>[[value]]</b> ' + baseCurrency + '</div>';\r\n\topts.graphs[0].classNameField = 'bulletClass';\r\n\topts.graphs[0].bulletField = 'bullet';\r\n\topts.graphs[0].labelText = '[[label]]';\r\n\topts.graphs[0].labelPosition = 'right';\r\n\topts.chartCursor = {\r\n\t\tcategoryBalloonDateFormat: 'D MMMM YYYY',\r\n\t\tcursorPosition: 'mouse',\r\n\t\tcursorColor: '#000',\r\n\t\tcolor: '#fff'\r\n\t};\r\n\topts.categoryAxis.parseDates = true;\r\n\tAmCharts.makeChart('chart' + chartId, opts);\r\n}\r\n\r\nfunction chartStock(chartId) {\r\n\tvar chartContainer = $('#' + chartId);\r\n\tif(chartContainer.length > 0) {\r\n\t\tvar dataSets = [];\r\n\t\tvar defaultCurrency = chartContainer.attr('data-currency');\r\n\t\tvar defaultCurrencyTitle = currencies[defaultCurrency];\r\n\t\tdataSets.push({\r\n\t\t\ttitle: defaultCurrencyTitle,\r\n\t\t\tcurrency: defaultCurrency,\r\n\t\t\tdataProvider: [],\r\n\t\t\tdataLoader: {},\r\n\t\t\tcategoryField: 'date',\r\n\t\t\tfieldMappings: [{\r\n\t\t\t\tfromField: 'value',\r\n\t\t\t\ttoField: 'value'\r\n\t\t\t}]\r\n\t\t});\r\n\t\t$.each(currencies, function(currency, currencyTitle) {\r\n\t\t\tif(currency !== defaultCurrency && currency !== baseCurrency) {\r\n\t\t\t\tdataSets.push({\r\n\t\t\t\t\ttitle: currencyTitle,\r\n\t\t\t\t\tcurrency: currency,\r\n\t\t\t\t\tdataProvider: [],\r\n\t\t\t\t\tdataLoader: {},\r\n\t\t\t\t\tcategoryField: 'date',\r\n\t\t\t\t\tfieldMappings: [{\r\n\t\t\t\t\t\tfromField: 'value',\r\n\t\t\t\t\t\ttoField: 'value'\r\n\t\t\t\t\t}]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\tdataSets[0].dataLoader.url = dataUrl(defaultCurrency);\r\n\t\tdataSets[0].dataLoader.format = 'json';\r\n\t\tdataSets[0].color = chartColors.chart1;\r\n\r\n\t\tvar chart = AmCharts.makeChart(chartId, {\r\n\t\t\ttype: 'stock',\r\n\t\t\ttheme: 'light',\r\n\t\t\tlanguage: 'ro',\r\n\t\t\tdataSets: dataSets,\r\n\t\t\tdataDateFormat: 'YYYY-MM-DD',\r\n\t\t\tchartScrollbarSettings: {\r\n\t\t\t\tgraph: 'g1',\r\n\t\t\t\tposition: 'bottom'\r\n\t\t\t},\r\n\t\t\tpanels: [{\r\n\t\t\t\tshowCategoryAxis: !0,\r\n\t\t\t\ttitle: 'Value',\r\n\t\t\t\tpercentHeight: 70,\r\n\t\t\t\tstockGraphs: [{\r\n\t\t\t\t\tid: 'g1',\r\n\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\tcomparable: !0,\r\n\t\t\t\t\tcompareField: 'value',\r\n\t\t\t\t\tbullet: 'round',\r\n\t\t\t\t\tcompareGraphBullet: 'round',\r\n\t\t\t\t\tfillAlphas: .5,\r\n\t\t\t\t\tcompareGraphFillAlphas: .4,\r\n\t\t\t\t\tballoonText: '[[title]]: <strong>[[value]]</strong> ' + baseCurrency,\r\n\t\t\t\t\tcompareGraphBalloonText: '[[title]]: <strong>[[value]]</strong> ' + baseCurrency\r\n\t\t\t\t}],\r\n\t\t\t\tstockLegend: {\r\n\t\t\t\t\tperiodValueTextComparing: '[[percents.value.close]]%',\r\n\t\t\t\t\tperiodValueTextRegular: '[[value.close]]'\r\n\t\t\t\t}\r\n\t\t\t}],\r\n\t\t\tcategoryField: 'date',\r\n\t\t\tperiodSelector: {\r\n\t\t\t\tposition: 'left',\r\n\t\t\t\tfromText: 'Perioada:',\r\n\t\t\t\ttoText: '',\r\n\t\t\t\tperiodsText: 'Zoom:',\r\n\t\t\t\tperiods: [{\r\n\t\t\t\t\tperiod: 'MM',\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tlabel: '1 lună'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tperiod: 'MM',\r\n\t\t\t\t\tselected: !0,\r\n\t\t\t\t\tcount: 3,\r\n\t\t\t\t\tlabel: '3 luni'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tperiod: 'MM',\r\n\t\t\t\t\tcount: 6,\r\n\t\t\t\t\tlabel: '6 luni'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tperiod: 'YYYY',\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tlabel: '1 an'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tperiod: 'YTD',\r\n\t\t\t\t\tlabel: 'An curent'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tperiod: 'MAX',\r\n\t\t\t\t\tlabel: 'Tot'\r\n\t\t\t\t}]\r\n\t\t\t},\r\n\t\t\tchartCursorSettings: {\r\n\t\t\t\tvalueBalloonsEnabled: !0,\r\n\t\t\t\tfullWidth: !0,\r\n\t\t\t\tcursorAlpha: .1,\r\n\t\t\t\tcursorColor: '#000',\r\n\t\t\t\tcolor: '#fff'\r\n\t\t\t},\r\n\t\t\tdataSetSelector: {\r\n\t\t\t\tposition: 'left',\r\n\t\t\t\twidth: 180,\r\n\t\t\t\tlistHeight: 130,\r\n\t\t\t\tselectText: 'Valuta:',\r\n\t\t\t\tcompareText: 'Compară cu:'\r\n\t\t\t}\r\n\t\t});\r\n\t\tchart.addListener('rendered', function(data) {\r\n\t\t\tfunction loadCurrencyData(data) {\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'GET',\r\n\t\t\t\t\turl: dataUrl(data.dataSet.currency),\r\n\t\t\t\t\tcache: false,\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tsuccess: function(response) {\r\n\t\t\t\t\t\tdata.dataSet.dataProvider = response;\r\n\t\t\t\t\t\tdata.chart.validateData();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tdata.chart.dataSetSelector.addListener('dataSetCompared', loadCurrencyData);\r\n\t\t\tdata.chart.dataSetSelector.addListener('dataSetSelected', loadCurrencyData);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction convertAmount(amount, fromVal, toVal, date) {\r\n\tvar result = 0;\r\n\r\n\t// if(!currencies[fromVal] || !currencies[toVal]) {\r\n\t// \treturn;\r\n\t// }\r\n\r\n\tif(date && window.cachedDateValues[date]) {\r\n\t\tfromVal = window.cachedDateValues[date][fromVal];\r\n\t\ttoVal = window.cachedDateValues[date][toVal];\r\n\t}\r\n\r\n\tif(fromVal && toVal) {\r\n\t\ttry {\r\n\t\t\tif(amount) {\r\n\t\t\t\tresult = (fromVal * amount) / toVal;\r\n\t\t\t}\r\n\t\t} catch(error) {\r\n\t\t\tresult = 0;\r\n\t\t}\r\n\t}\r\n\r\n\tif(typeof result !== 'number' || isNaN(result)) {\r\n\t\tresult = 0;\r\n\t}\r\n\tresult = Number(result);\r\n\tif(result.toPrecision) {\r\n\t\tresult = result.toPrecision(5);\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction amountWithVat(amount, vatPercentage) {\r\n\tvar result = Number(amount) + (Number(amount) * 0.19);\r\n\tif(result.toPrecision) {\r\n\t\tresult = result.toPrecision(5);\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction loadCurrencyOn(date, onSuccess, loadingElement) {\r\n\tif(!window.cachedDateValues) {\r\n\t\twindow.cachedDateValues = {};\r\n\t}\r\n\tdate = toURLDate(date);\r\n\tif(date && window.cachedDateValues[date]) {\r\n\t\tonSuccess(window.cachedDateValues[date]);\r\n\t}\r\n\tif(loadingElement) {\r\n\t\t$(loadingElement).fadeIn('fast');\r\n\t}\r\n\treturn $.ajax({\r\n\t\ttype: 'GET',\r\n\t\turl: homeUrl + '/json/on/' + date,\r\n\t\tcache: false,\r\n\t\tdataType: 'json',\r\n\t\tsuccess: function(response) {\r\n\t\t\tif(loadingElement) {\r\n\t\t\t\t$(loadingElement).fadeOut('fast');\r\n\t\t\t}\r\n\t\t\tif(response && response.published_on) {\r\n\t\t\t\twindow.cachedDateValues[date] = response.values;\r\n\t\t\t\tonSuccess(response);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfail: function() {\r\n\t\t\tif(loadingElement) {\r\n\t\t\t\t$(loadingElement).fadeOut('fast');\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\n(function($) {\r\n\t$(document).ready(function() {\r\n\t\t/* Date Picker */\r\n\t\t$('.input-group.date').datepicker({\r\n\t\t\tformat: 'yyyy-mm-dd',\r\n\t\t\tlanguage: 'ro',\r\n\t\t\tweekStart: 1,\r\n\t\t\tstartDate: '2015-01-01',\r\n\t\t\tendDate: 'tomorrow',\r\n\t\t\tmaxViewMode: 2,\r\n\t\t\tdaysOfWeekDisabled: '0,6',\r\n\t\t\ttodayHighlight: true,\r\n\t\t\t// orientation: 'bottom auto'\r\n\t\t});\r\n\r\n\t\t/* List Input */\r\n\t\t$('.list-input input[type=\"hidden\"]').on('change', function() {\r\n\t\t\tvar field = $(this).closest('.list-input');\r\n\t\t\tvar value = $(this).val();\r\n\t\t\tvar valueIsSupported = currencies[value] || null;\r\n\t\t\tif(valueIsSupported) {\r\n\t\t\t\tvar current = field.find('li[data-value=\"'+value+'\"]');\r\n\t\t\t\tfield.find('li.active').removeClass('active');\r\n\t\t\t\tcurrent.addClass('active');\r\n\t\t\t}\r\n\t\t});\r\n\t\t$('.list-input li > a').on('click', function() {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tvar field = $(this).closest('ul');\r\n\t\t\tvar input = field.find('input[type=\"hidden\"]');\r\n\t\t\tvar value = $(this).closest('li[data-value]').attr('data-value');\r\n\t\t\tvar valueIsSupported = currencies[value] || null;\r\n\t\t\tif(valueIsSupported) {\r\n\t\t\t\tinput.val(value).change();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/* Charts */\r\n\t\tvar today = new Date();\r\n\t\tvar threeMonthsAgo = new Date(today);\r\n\t\tthreeMonthsAgo.setDate(threeMonthsAgo.getDate() - 90);\r\n\t\t\r\n\t\tloadChart(1, 'EUR', chartColors.chart1, threeMonthsAgo, today);\r\n\t\tloadChart(2, 'USD', chartColors.chart2, threeMonthsAgo, today);\r\n\t\tloadChart(3, 'GBP', chartColors.chart3, threeMonthsAgo, today);\r\n\r\n\t\t$('.currencies-dropdown .dropdown-menu li a').on('click', function(t) {\r\n\t\t\tvar currency = $(this).attr('data-currency');\r\n\t\t\tvar $main = $(this).closest('.currencies-dropdown');\r\n\t\t\tvar chart = $main.attr('data-chart');\r\n\t\t\tif(currency && chart) {\r\n\t\t\t\t$('.chart-'+chart+'-currency').text(currency);\r\n\t\t\t\tloadChart(chart, currency, chartColors['chart'+chart], threeMonthsAgo, today);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tchartStock('chart-currency-evolution');\r\n\r\n\r\n\t\t/* Converters */\r\n\t\tvar converterSelector = '.converter #amount, .converter #convert-from, .converter #convert-to, .converter #datepicker';\r\n\t\tvar fastConverterSelector = '.fast-converter #amount, .fast-converter #convert-from, .fast-converter #convert-to';\r\n\t\t$(converterSelector+', '+fastConverterSelector).on('change', function() {\r\n\t\t\tvar form = $(this).closest('form');\r\n \r\n\t\t\tvar date = form.find('#datepicker');\r\n\t\t\tvar from = form.find('#convert-from');\r\n\t\t\tvar to = form.find('#convert-to');\r\n\t\t\tvar amount = form.find('input#amount');\r\n\t\t\tvar withVat = form.find('#with-vat');\r\n\r\n\t\t\tvar convertedAmount = 0;\r\n\t\t\tif(date.val()) {\r\n\t\t\t\tvar loadingElement = form.find('.loading');\r\n\t\t\t\tif(!loadingElement.length) {\r\n\t\t\t\t\tform.append('<div class=\"loading\"><i class=\"fa fa-spinner fa-spin\"></i></div>');\r\n\t\t\t\t\tloadingElement = form.find('.loading');\r\n\t\t\t\t}\r\n\t\t\t\tloadCurrencyOn(date.val(), function(response) {\r\n\t\t\t\t\tconvertedAmount = convertAmount(amount.val(), from.val(), to.val(), date.val());\r\n\t\t\t\t\tform.find('input#result').val(convertedAmount).change();\r\n\t\t\t\t\twithVat.text(amountWithVat(convertedAmount));\r\n\t\t\t\t}, loadingElement);\r\n\t\t\t} else {\r\n\t\t\t\tconvertedAmount = convertAmount(amount.val(), from.val(), to.val(), null);\r\n\t\t\t\tform.find('input#result').val(convertedAmount).change();\r\n\t\t\t\twithVat.text(amountWithVat(convertedAmount));\r\n\t\t\t}\r\n\t\t});\r\n\t\t$('.fast-converter #switch, .converter #switch').click(function(event) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tvar form = $(this).closest('form');\r\n\t\t\tvar from = form.find('#convert-from');\r\n\t\t\tvar to = form.find('#convert-to');\r\n\t\t\tvar fromVal = from.val();\r\n\t\t\tfrom.val(to.val()).change();\r\n\t\t\tto.val(fromVal).change();\r\n\t\t});\r\n\t});\r\n})(jQuery);\r\n\r\n"]}